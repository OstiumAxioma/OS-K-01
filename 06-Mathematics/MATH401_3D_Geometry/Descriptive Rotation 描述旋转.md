---
date: 2024-05-19
tags:
  - 数学/几何
  - 数学/线性代数
toolSet:
  - "[[Quaternion 四元数]]"
knowledgeLink: 
status:
---
旋转在几何和线性代数中是描述刚体围绕一个固定点的运动的在平面或空间中的变换。在计算几何中，我们需要数学的方法来描述旋转，数学中有许多工具，他们都各有优劣，且有一定的限制，需要择优使用
## 欧拉角
在普通三维空间中，坐标旋转可以用欧拉角来定义，或关于要绕其旋转的向量和一个单一的旋转角度构成的轴角定义。莱昂哈德·欧拉用欧拉角来描述刚体在三维欧几里得空间的取向。对于任何参考系，一个刚体的取向，是依照顺序，从这参考系，做三个欧拉角的旋转而设定的。所以，刚体的取向可以用三个基本旋转矩阵来决定。换句话说，任何关于刚体旋转的旋转矩阵是由三个基本旋转矩阵复合而成的。
### 静态的定义
对于在三维空间里的一个参考系，任何坐标系的取向，都可以用三个欧拉角来表现。参考系（固定系）又称为实验室参考系，是静止不动的。而坐标系（固连系）则固定于刚体，随着刚体的旋转而旋转。

参阅下图。设xyz轴为参考系的参考轴，<font color="#c0504d">X</font><font color="#4f81bd">Y</font><font color="#9bbb59">Z</font>轴为物体自身的坐标轴，xoy平面与XOY平面的相交线为交点线，用（$N$）表示。zxz顺规的欧拉角可以静态地这样定义：
- α（进动角）是x-轴与交点线的夹角，
- 𝛽（章动角）是z-轴与Z-轴的夹角，
- 𝛾（自旋角）是交点线与X-轴的夹角。
![[Pasted image 20240520011857.png|center]]
对于夹角的顺序和标记，夹角的两个轴的指定，并没有任何常规。科学家对此从未达成共识。

> [!warning]
> 每当用到欧拉角时，我们必须明确的表示出夹角的顺序，指定其参考轴。

夹角的顺序非常关键，X-Y-Z与Y-X-Z，即使对应数值一样得到的结果也完全不一样。这里涉及到欧拉角系统的一个重要性质，即：
<center>欧拉角描述的是变换本身，而非变换的过程</center>

为何这一特性如此重要以至于改变顺序会导致结果完全不同呢？这是因为坐标轴本身也会在变换的过程中变化。如果我们先绕X轴旋转，再绕Y轴旋转，此时的Y轴已经不处于绕X轴旋转前的位置上了，结果自然不同。旋转的过程也是遵循：
<center>基础坐标->计算欧拉角->目标坐标</center>
这一步骤的，也就是说，旋转角度这一过程并不会被体现出来，基础坐标与目标坐标之间是离散的并没有任何的插值。欧拉角变化的顺序与坐标轴变化也导致了万向死锁问题：

> [!important] 万向死锁
> 这是因为先被计算的轴旋转90°会导致与其旋转平面正交的轴重合与另一不正交的轴，导致失去操作这一轴的能力。

由于这一因素，与不能平滑插值的原因，计算几何中我们会更多的使用四元数描述旋转
```embed
title: "无伤理解欧拉角中的“万向死锁”现象_哔哩哔哩_bilibili"
image: "https://i0.hdslb.com/bfs/archive/ab45fad351d0a590992c0a6c3c00ea045a17cd2a.jpg@100w_100h_1c.png"
description: "最近在写一个3d的小东西，又碰到经典的“万向死锁”问题，搜索了一下，发现很多朋友一开始遇到这个东西都会迷糊一阵子，于是决定做一期“无伤理解”的视频视频中的beat音乐来自于@DTDropout , 视频播放量 1346559、弹幕量 885、点赞数 15976、投硬币枚数 6971、收藏人数 15344、转发人数 1801, 视频作者 Ele实验室, 作者简介 空谈误国，实干兴邦，相关视频：四元数的可视化，四元数和三维转动，可互动的探索式视频（请看链接），怎么理解叉乘和点乘，欧拉角的旋转过程，机器人学——李群、李代数快速入门，欧拉公式 最完美的视频诠释 至今我见过对欧拉公式解释得最好的一部视频，欧拉多厉害？心算试一试，实际感受下差距，mpu6050_dmp姿态解算，开源，stm32欧拉角解算，代码在视频说明里，欢迎白嫖，欧拉角概念的深入理解，【欧拉角】图文结合带你看懂欧拉角及其奇点问题"
url: "https://www.bilibili.com/video/BV1Nr4y1j7kn/?vd_source=647dd14d4011c899a9791ec94dd6017b"
```

## 轴角
轴角（Axis-Angle）表示法是一种描述三维旋转的方法，它使用一个旋转轴和一个旋转角度来表示旋转。轴角表示法直观且易于理解，特别适用于描述旋转的几何意义。轴角表示在处理刚体动力学的时候是方便的。它对特征化旋转还有在刚体运动的不同表示之间的转换是有用的。
### 轴角表示法的定义
在轴角表示法中，旋转由以下两个部分组成：
- 旋转轴（Axis）：一个通过原点的单位向量$\vec{u}$，表示旋转的方向。
- 旋转角度（Angle）：一个标量$\theta$，表示绕旋转轴的旋转角度，通常以弧度或度数表示。
旋转可以表示为：$(u,\theta)$

假如你站在地面上，选取重力的方向为负 <font color="#9bbb59">Z</font> 方向。如果你左转，你将绕 <font color="#9bbb59">Z</font> 轴旋转 ${\tfrac {\pi }{2}}$ 弧度。在轴角表示中，这将是：
$$
\langle\text{axis,angle}\rangle=\left(\begin{bmatrix}a_x\\a_y\\a_z\end{bmatrix},\theta\right)=\left(\begin{bmatrix}0\\0\\1\end{bmatrix},\frac{\pi}{2}\right)
$$
这可以表示为指示 <font color="#9bbb59">Z</font> 方向的模为${\tfrac {\pi }{2}}$的旋转向量
## 四元数
表现在三维空间中的旋转的一种可供选择的方式是[[Quaternion 四元数]]。

四元数提供了表示在三维中旋转和方向的另一种方式。它们应用与计算机图形学、控制理论、信号处理和轨道力学中。例如，在太空船的姿态控制系统中常用四元数来下达指令，还用于测距它们的当前姿态。基本原理是组合很多四元数变换比组合很多矩阵变换在数值上更加稳定。

四元数是通过使用单位四元数来完成旋转的描述的，遵从以下公式：
$$
\vec{v'}=q \vec{v}q^{-1}
$$

> [!important]
> 其中，只使用$q \vec{v}$我们便已经可以在数学意义上描述旋转。但这一操作同时会使得旋转轴上的所有坐标都与实数部系数$w$的坐标进行一对一调换。然而$w$这一系数的几何表示位于第四个维度，并不能在三位被观测到，因此体现在三维坐标系中的物体就会被表现为在旋转轴轴向上坐标被归零（压扁）。为了解决这一问题，需要重新乘上一个与其共轭的单位四元数$q^{-1}$将坐标轴$w$上的点重新拉回旋转轴。

详细的解释可以看下面的视频

```embed
title: "blender-四元数旋转的原理_哔哩哔哩_bilibili"
image: "https://i0.hdslb.com/bfs/archive/35357c5c54f7e179b46134c79b7ca8ca4953b600.jpg@100w_100h_1c.png"
description: "几何节点下载链接：https://pan.baidu.com/s/1LOeXvQVwvVlCeglPrjxfoQ 提取码：r858, 视频播放量 43149、弹幕量 141、点赞数 2024、投硬币枚数 1311、收藏人数 2531、转发人数 252, 视频作者 峰峰居士, 作者简介 找我？微信：apiruifeng，相关视频：四元数乘法和三维绕轴旋转过程的一个截面演示，形象理解四元数，四元数乘法和旋转，点阵及轨迹演示，四元数乘法可视化（Pad 操作），四元数 Quaternion，[Unity]终于会用四元数了，三维旋转需要经过四维空间？关于四元数，四元数基本运算与姿态插补-PyBullet仿真，四元数可视讲解，四元数与姿态表示"
url: "https://www.bilibili.com/video/BV1jT411L7bv/?vd_source=647dd14d4011c899a9791ec94dd6017b"
```
